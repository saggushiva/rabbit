{
  "vhosts": [
    { "name": "tg-message-service" }
  ],
  "exchanges": [
    {
      "name": "targetapi-exchange",
      "vhost": "tg-message-service",
      "type": "topic",
      "durable": true,
      "auto_delete": false,
      "internal": false,
      "arguments": {}
    },
    {
      "name": "vg-topic-exchange",
      "vhost": "tg-message-service",
      "type": "topic",
      "durable": true,
      "auto_delete": false,
      "internal": false,
      "arguments": {}
    },
    {
      "name": "vg-results-exchange",
      "vhost": "tg-message-service",
      "type": "topic",
      "durable": true,
      "auto_delete": false,
      "internal": false,
      "arguments": {}
    },
    {
      "name": "vg-shot-exchange",
      "vhost": "tg-message-service",
      "type": "topic",
      "durable": true,
      "auto_delete": false,
      "internal": false,
      "arguments": {}
    }
  ],
   "queues": [
    {
      "name": "targetapi-queue",
      "vhost": "tg-message-service",
      "durable": true,
      "auto_delete": false,
      "routing_key": "targetApi.v1.env.*.site.*.bay.*.command.*",
      "arguments": {}
    },
    {
      "name": "vg-topic-queue",
      "vhost": "tg-message-service",
      "durable": true,
      "auto_delete": false,
      "routing_key": "env.*.site.*.bay.*.app.*",
      "arguments": {}
    },
    {
      "name": "vg-results-queue",
      "vhost": "tg-message-service",
      "durable": true,
      "auto_delete": false,
      "routing_key": "env.*.site.*.bay.*.app.*.result.*",
      "arguments": {}
    },
    {
      "name": "vg-shot-queue",
      "vhost": "tg-message-service",
      "durable": true,
      "auto_delete": false,
      "routing_key": "env.*.site.*.bay.*.app.*.shot.*",
      "arguments": {}
    }
  ],
  "bindings": [
    {
      "source": "targetapi-exchange",
      "vhost": "tg-message-service",
      "destination": "targetapi-queue",
      "destination_type": "queue",
      "routing_key": "targetApi.v1.env.*.site.*.bay.*.command.*"
    },
    {
      "source": "vg-topic-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-topic-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*"
    },
    {
      "source": "vg-topic-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-results-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.result.*"
    },
    {
      "source": "vg-topic-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-shot-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.shot.*"
    },
    {
      "source": "vg-results-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-topic-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.result.*"
    },
    {
      "source": "vg-results-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-results-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.result.*"
    },
    {
      "source": "vg-results-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-shot-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.result.*"
    },
    {
      "source": "vg-shot-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-topic-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.shot.*"
    },
    {
      "source": "vg-shot-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-results-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.shot.*"
    },
    {
      "source": "vg-shot-exchange",
      "vhost": "tg-message-service",
      "destination": "vg-shot-queue",
      "destination_type": "queue",
      "routing_key": "env.*.site.*.bay.*.app.*.shot.*"
    }
  ],
  "shovels": [
    {
      "name": "venu-cloud-shovel",
      "value": {
        "src-uri": "amqp://user:admin123@<source-rabbit>",
        "src-queue": "vg-shot-queue",
        "dest-uri": "amqp://user:admin123@<dest-rabbitmq>",
        "dest-queue": "dest-queue",
        "ack-mode": "on-confirm"
      }
    }
  ],
  "federation-upstreams": [
    {
      "name": "src-upstream",
      "value": {
        "uri": "amqp://admin:admin123@<sourece-rabbit>",
        "expires": 3600000
      }
    }
  ],
  "policies": [
    {
      "vhost": "tg-message-service",
      "name": "federate-logs",
      "pattern": "^logs$",
      "apply-to": "exchanges",
      "definition": {
        "federation-upstream": "src-upstream"
      },
      "priority": 0
    }
  ]
}